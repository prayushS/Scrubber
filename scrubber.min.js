var scrubber=function(a){var b={video:document.querySelector(".video"),scrubber:document.querySelector(".scrubber-seek"),scrubberWrapper:document.querySelector(".scrubber-wrapper"),scrubberProgress:document.querySelector(".scrubber-progress"),scrubberShadow:document.querySelector(".scrubber-seek-shadow"),hoverTime:document.querySelector(".scrubber-time")},c={duration:"",_mouseDown:!1,video:{height:320,width:640,loop:!1,autoplay:!1,controls:!1,preload:"metadata",type:"video/mp4"},scrubber:{showTime:!0}};return extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},convertTime=function(a){var b=Math.trunc(a),c=parseInt(b/3600)%24,d=parseInt(b/60)%60,e=b%60;return(c<10?"0"+c:c)+":"+(d<10?"0"+d:d)+":"+(e<10?"0"+e:e)},findTime=function(a){var d=(a-b.scrubberWrapper.offsetLeft)/b.scrubberWrapper.offsetWidth*c.duration;return convertTime(d)},hoverTime=function(a,d){c.scrubber.showTime&&(b.hoverTime.innerHTML=findTime(a),b.hoverTime.classList.remove("hide"),b.hoverTime.setAttribute("style","left: "+d+"px"))},bind=function(){b.video.addEventListener("loadedmetadata",function(){c.duration=event.target.duration.toFixed(3)},!1),b.video.addEventListener("click",function(){switch(this.getAttribute("data-state")){case"play":this.play(),this.setAttribute("data-state","pause");break;case"rewind":this.play(0),this.setAttribute("data-state","pause");break;case"pause":this.pause(),this.setAttribute("data-state","play")}},!1),b.video.addEventListener("timeupdate",function(){updateProgress()},!1),b.video.addEventListener("ended",function(){this.setAttribute("data-state","rewind")},!1),b.scrubberWrapper.addEventListener("mousedown",mouseDown,!1),b.scrubberWrapper.addEventListener("mousemove",mouseMove,!1),b.scrubberWrapper.addEventListener("mouseup",mouseUp,!1),b.scrubberWrapper.addEventListener("mouseout",mouseOut,!1)},updateProgress=function(){b.scrubberProgress.setAttribute("style","width: "+100/c.duration*b.video.currentTime+"%")},mouseDown=function(){c._mouseDown=!0,b.scrubber.classList.add("scrubber-seek-clicked"),b.video.pause(),b.video.setAttribute("data-state","play"),b.video.setAttribute("data-scrub","on"),b.video.currentTime=(event.x-this.offsetLeft)/this.offsetWidth*c.duration},mouseOut=function(){c._mouseDown=!1,c.scrubber.showTime&&b.hoverTime.classList.add("hide"),"on"==b.video.getAttribute("data-scrub")&&b.video.play(),b.video.setAttribute("data-scrub","off"),b.scrubberShadow.classList.add("hide")},mouseMove=function(){var a=event.x-this.offsetLeft-b.scrubber.offsetWidth/2;b.scrubberShadow.classList.remove("hide"),b.scrubberShadow.setAttribute("style","left: "+a+"px"),hoverTime(event.x,a),c._mouseDown&&(b.video.currentTime=(event.x-this.offsetLeft)/this.offsetWidth*c.duration)},mouseUp=function(){c._mouseDown=!1,b.scrubber.classList.remove("scrubber-seek-clicked"),c.scrubber.showTime&&b.hoverTime.classList.add("hide"),b.video.play(),b.video.setAttribute("data-state","pause"),b.video.setAttribute("data-scrub","off"),b.video.currentTime=(event.x-this.offsetLeft)/this.offsetWidth*c.duration},a={initialize:function(a,d){extend(c.video,a),extend(c.scrubber,d);for(var e in c.video)b.video[e]=c.video[e];bind()},getDuration:function(){return c.duration}}}(scrubber);