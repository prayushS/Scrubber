var scrubber=function(a){"use strict";var b={video:document.querySelector(".video"),scrubber:document.querySelector(".scrubber-seek"),scrubberWrapper:document.querySelector(".scrubber-wrapper"),scrubberProgress:document.querySelector(".scrubber-progress"),scrubberShadow:document.querySelector(".scrubber-seek-shadow"),hoverTime:document.querySelector(".scrubber-time")},c={duration:"",_mouseDown:!1,video:{height:320,width:640,loop:!1,autoplay:!1,controls:!1,preload:"metadata",type:"video/mp4"},scrubber:{showTime:!0}},d=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},e=function(a,b,c){return Math.min(Math.max(a,b),c)},f=function(a){var b=Math.trunc(a),c=parseInt(b/3600)%24,d=parseInt(b/60)%60,e=b%60;return(c<10?"0"+c:c)+":"+(d<10?"0"+d:d)+":"+(e<10?"0"+e:e)},g=function(a){var d=(a-b.scrubberWrapper.offsetLeft)/b.scrubberWrapper.offsetWidth*c.duration;return f(d)},h=function(a,c){b.hoverTime.innerHTML=g(a),b.hoverTime.classList.remove("hide"),b.hoverTime.setAttribute("style","left: "+c+"px")},i=function(){b.video.addEventListener("loadedmetadata",function(){c.duration=event.target.duration.toFixed(3)},!1),b.video.addEventListener("click",function(){switch(this.getAttribute("data-state")){case"play":this.play(),this.setAttribute("data-state","pause");break;case"rewind":this.play(0),this.setAttribute("data-state","pause");break;case"pause":this.pause(),this.setAttribute("data-state","play")}},!1),b.video.addEventListener("timeupdate",function(){j()},!1),b.video.addEventListener("ended",function(){this.setAttribute("data-state","rewind")},!1),b.scrubberWrapper.addEventListener("mousedown",k,!1),b.scrubberWrapper.addEventListener("mousemove",m,!1),b.scrubberWrapper.addEventListener("mouseup",n,!1),b.scrubberWrapper.addEventListener("mouseout",l,!1),window.addEventListener("mousemove",function(){c._mouseDown&&(b.video.currentTime=(event.x-b.scrubberWrapper.offsetLeft)/b.scrubberWrapper.offsetWidth*c.duration)},!1),window.addEventListener("mouseup",function(){c._mouseDown&&(c._mouseDown=!1,b.video.setAttribute("data-scrub","off"),"rewind"!==b.video.getAttribute("data-state")&&b.video.play())},!1)},j=function(){b.scrubberProgress.setAttribute("style","width: "+100/c.duration*b.video.currentTime+"%"),console.log(100/c.duration*b.video.currentTime)},k=function(){c._mouseDown=!0,b.scrubber.classList.add("scrubber-seek-clicked"),b.video.pause(),b.video.setAttribute("data-state","play"),b.video.setAttribute("data-scrub","on"),b.video.currentTime=(event.x-this.offsetLeft)/this.offsetWidth*c.duration},l=function(){c.scrubber.showTime&&b.hoverTime.classList.add("hide"),b.scrubberShadow.classList.add("hide")},m=function(){var a=e(event.x-this.offsetLeft-b.scrubber.offsetWidth/2,0,this.offsetWidth);b.scrubberShadow.classList.remove("hide"),b.scrubberShadow.setAttribute("style","left: "+a+"px"),h(event.x,a),c._mouseDown&&(b.video.currentTime=(event.x-this.offsetLeft)/this.offsetWidth*c.duration)},n=function(){c._mouseDown=!1,b.scrubber.classList.remove("scrubber-seek-clicked"),c.scrubber.showTime&&b.hoverTime.classList.add("hide"),b.video.play(),b.video.setAttribute("data-state","pause"),b.video.setAttribute("data-scrub","off"),b.video.currentTime=(event.x-this.offsetLeft)/this.offsetWidth*c.duration};return a={build:"1.0.0",initialize:function(a,e){d(c.video,a),d(c.scrubber,e);for(var f in c.video)b.video[f]=c.video[f];i()},getDuration:function(){return c.duration}}}(scrubber);